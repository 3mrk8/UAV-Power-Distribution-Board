** Sheet_4 **
RDR4 RDR4_1 GND 76.8K
RDR6 RDR6_1 RDR6_2 15.4K
CDC6 GND VIN 0.1UF
RDR1 RDR1_1 VCC 1K
RDR2 RDR2_1 VIN 357K
RDR3 GND RDR2_1 47.5K
C4 GND C4_2 47UF
C5 GND C4_2 47UF
C6 GND C4_2 47UF
C7 GND C4_2 47UF
CAP2 C4_2 GND 68UF
R5 ISNS- R5_2 NOT POPULATED
R4 ISNS- R4_2 10
R2 R2_1 R4_2 10M
R3 ISNS+ R2_1 10
QM1 GND GND GND QM1_4 R5_2 R5_2 R5_2 R5_2 R5_2 BSC123N08NS3G
XU0 RDR4_1 U0_2 RDR6_2 FB ISNS- ISNS+ VIN U0_8 GND U0_10 U0_11 R5_2 U0_13 RDR1_1 RDR2_1 GND GND TPS43060RTER
QM2 R5_2 R5_2 R5_2 U0_13 C4_2 C4_2 C4_2 C4_2 C4_2 BSC123N08NS3G
RDR5 U0_10 VCC 2.0
DD1 U0_11 VCC SS1060-SMB
R1 R2_1 R4_2 10M
VPOTANT2 VPOTANT2_1 VPOTANT2_2 VPOTANT2_2 30KΩ
XUS2 GND US2_2 GND MBRF2060CTDH
XU2 GND VPOTANT2_2 US2_2 XU2_4 XU2_5 XL4016
F1 F1_1 R2_1 32NM-150H
F2 C4_2 F2_2 JFC1206-1800FS
F3 C4_2 XU2_5 JFC1206-1800FS
F4 C4_2 F4_2 JFC1206-1800FS
F5 C4_2 F5_2 JFC1206-1800FS
XU3 GND XU3_2 XU3_3 XU3_4 F4_2 XL4016
XUS3 GND XU3_3 GND MBRF2060CTDH
VPOTANT3 VPOTANT3_1 XU3_2 XU3_2 30KΩ
XU4 GND XU4_2 XU4_3 XU4_4 F5_2 XL4016
XUS4 GND XU4_3 GND MBRF2060CTDH
VPOTANT4 VPOTANT4_1 XU4_2 XU4_2 30KΩ
XU1 GND XU1_2 XU1_3 XU1_4 F2_2 XL4016
XUS1 GND XU1_3 GND MBRF2060CTDH
VPOTANT1 VPOTANT1_1 XU1_2 XU1_2 30KΩ
XUDC5 ISNS- ISNS+ 100PF
CDC4 GND RDR6_1 22NF
CDC1 R5_2 U0_11 100NF
CDC2 GND U0_2 100NF
CDC3 GND RDR6_2 1.2NF
XUC1 GND R2_1 10UF
XUC2 GND R2_1 10UF
XUC3 GND R2_1 10UF
C11 F5_2 GND 1UF
C10 F4_2 GND 1UF
C18 VPOTANT3_1 GND 1UF
C19 VPOTANT4_1 GND 1UF
C17 GND VPOTANT2_1 1UF
C9 XU2_5 GND 1UF
C8 F2_2 GND 1UF
C16 VPOTANT1_1 GND 1UF
CAP1 R2_1 GND 1UF
CAP15 VPOTANT1_1 GND 1000UF
CAP16 VPOTANT2_1 GND 1000UF
CAP17 VPOTANT3_1 GND 1000UF
CAP18 VPOTANT4_1 GND 1000UF
CAP5 F4_2 GND 470UF
CAP6 F5_2 GND 470UF
CAP4 XU2_5 GND 470UF
CAP3 F2_2 GND 470UF
XUCAP10 F5_2 GND 220UF
XUCAP9 F4_2 GND 220UF
XUCAP8 XU2_5 GND 220UF
XUCAP7 F2_2 GND 220UF
CAP14 VPOTANT4_1 GND 1000UF
CAP13 VPOTANT3_1 GND 1000UF
CAP12 VPOTANT2_1 GND 1000UF
CAP11 VPOTANT1_1 GND 1000UF
R7 FB GND 22KΩ
XUC12 XU1_4 F2_2 1UF
XUC13 XU2_4 XU2_5 1UF
XUC14 XU3_4 F4_2 1UF
XUC15 F5_2 XU4_4 1UF
XU23 F1_1 GND GND F1_1 XT30PW-F
CN2 VPOTANT2_1 GND MX301-5.0-02P-BU01-CU-Y-A
CN3 VPOTANT3_1 GND MX301-5.0-02P-BU01-CU-Y-A
CN4 VPOTANT4_1 GND MX301-5.0-02P-BU01-CU-Y-A
CN1 VPOTANT1_1 GND MX301-5.0-02P-BU01-CU-Y-A
DTVS2 VPOTANT1_1 GND SM4T26AY
DTVS3 VPOTANT2_1 GND SM4T26AY
DTVS4 VPOTANT3_1 GND SM4T26AY
DTVS5 VPOTANT4_1 GND SM4T26AY
DTVS1 F1_1 GND 1.5KE27A_C521812
R6 FB C4_2 523KΩ
R11 XU4_2 GND 1KΩ
R10 XU3_2 GND 1KΩ
R9 VPOTANT2_2 GND 1KΩ
R8 XU1_2 GND 1KΩ
RDR7 U0_8 QM1_4 2
XUL1 R4_2 R5_2 22UH
XUL2 XU1_3 VPOTANT1_1 47UH
XUL3 US2_2 VPOTANT2_1 47UH
XUL4 XU3_3 VPOTANT3_1 47UH
XUL5 XU4_3 VPOTANT4_1 47UH



































.tran 10m
***********************************************************
* Model for XL4016 developed EasyEDA by signality.co.uk 
* based on datasheet:
*    http://www.xlsemi.com/datasheet/XL4016%20datasheet.pdf 
* and softstart performance information kindly provided by 
* Bin Liu of XLSEMI.com
**
* Note that the following parameters of the Error Amplifier 
* are best guess as they are not specified in the datasheet: 
*    Transconductance:    G=1mS 
*    Output current:      Iout=50uA 
*    Output resistance:   Rout=10MOhm
*    Output high voltage: Vhigh=1V
*    Output low voltage:  Vlow=0V
* The oscillator output swing is unspecified therefore in 
* the model it is defined to be 1V peak to peak and the 
* Error Amplifier output swing is set to the same range to 
* accommodate the 0% to 100% duty cycle quoted in the 
* datasheet. 
* In the real device, this output swing may be different.
**
***********************************************************
.subckt xl4016 GRND FB SW VC VIN
A1 ILIMREF N002 0 0 0 0 ILIM 0 SCHMITT Vt=0 Vh=1u
A2 OSPREF N002 0 0 0 0 OSP 0 SCHMITT Vt=0 Vh=1u
B1 VIN OSPREF V=LIMIT(V(VIN,GRND)/1k, 0, 220u)*V(VINOK)
B2 VIN ILIMREF V=LIMIT(V(VIN,GRND)/1k, 0, 200u)*V(VINOK)
A4 0 ILIM 0 OSP 0 0 CLR 0 OR
S1 SW N003 GDRV 0 SW
R1 VIN N003 22u
A3 N005 0 CLK PRE CLR 0 GDRV 0 DFLOP Td=1u
A5 SAW ERR 0 0 0 0 CLK 0 SCHMITT Vt=0 Vh=100u
A6 FB REF 0 0 0 0 ERR 0 OTA G=1m Iout=50u Rout=10Meg Vhigh=1 Vlow=0
R2 N005 0 1
C1 SAW 0 1n
A7 SAW N004 N004 N004 N004 SAW N004 N004 SCHMITT Vt=0.6 Vh=0.5 td=1n Rlow=10 Rhigh=2G
Vimon1 N004 0 -100m
B3 0 PRE I=U(I(Vimon1)-1m) Rpar=1 Cpar=1n
R3 ERR N006 20k
C2 N006 0 3.3n
B5 VIN SAW I=(LIMIT(V(VIN,GRND), 0, 3.3)/3.3*(48u+132u*V(SCPn)))*V(VINOK)
C5 N002 VIN 10p
R6 N003 N002 1k
B4 GRND VC I=MIN(V(VIN,GRND), 3.3)/100 Rpar=100
I1 VIN GRND 2.1m load
A9 VIN GRND GRND GRND GRND GRND REF GRND SCHMITT Vt=8 Vh=0.1 Vhigh=1.25
A10 VIN GRND 0 0 0 VINOKn VINOK 0 SCHMITT Vt=8 Vh=0.1 ; Trise=100u
A8 N001 0 ILIM OSP 0 SCPn 0 0 DFLOP
R7 N001 0 1
.model sw sw(Ron=40m Roff=100Meg Vt=0.5 Vh=0)
.ends xl4016
***********************************************************